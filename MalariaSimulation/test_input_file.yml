# ---------------------------------------------------------------
#
# DATE: Sep 16 2015
# AUTHORS: Tran Dang Nguyen and Maciej F Boni
#
# This sample input file was created to get a first-time user up 
# and running quickly with the simulation.
#
# ---------------------------------------------------------------


# total number of days the simulation is run, including the burn-in period which we normally set to 4000
# days; during the burn-in period, no one receives malaria treatement and the system sets into a natural 
# equilibrium 
total_time: 11300 #2920 is 8 years

# length of burn-in period
start_treatment_day: 1825 #5 years - from 2008 to 2012

# the day at which the simulation's reporting functionality begins collecting data for 
# the purposes of displaying it
start_collect_data_day: 1825

# probability that a symptomatic and infected individual seeks and receives antimalarial treatment
p_treatment: 0.0

# this functionality works, but it was not used in any analyses for the 2015 LGH paper
number_of_locations: 5
#low_transmission_locations_index: [[0, 33], [37, 43], [47, 53], [57, 63], [67, 100]]
#high_transmission_locations_index: [[33, 37], [43, 47], [53, 57], [63, 67]]

# flag to indicate whether loading a separate csv input file or not
load_coordinate: 1

Cambodia_info:
  0:
    province_name: Oddar Meanchey
    pop_size: 0 #185819
    coordinates: [14.16666667,103.50000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  1:
    province_name: Preah Vihear
    pop_size: 0 #171139
    coordinates: [13.78333333,104.96666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  2:
    province_name: Steung Treng
    pop_size: 0 #111671
    coordinates: [13.51666667,105.95000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  3:
    province_name: Ratanakiri
    pop_size: 0 #150466
    coordinates: [13.73333333,107.00000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  4:
    province_name: Mondulkiri
    pop_size: 0 #61107
    coordinates: [12.45000000,107.23333333]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  5:
    province_name: Kratie
    pop_size: 0 #319217
    coordinates: [12.48333333,106.01666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  6:
    province_name: Siem Reap
    pop_size: 0 #896443
    coordinates: [13.36222222,103.85972222]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  7:
    province_name: Banteay Meanchey
    pop_size: 0 #677872
    coordinates: [13.75000000,103.00000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  8:
    province_name: Kampong Thom
    pop_size: 0 #631409
    coordinates: [12.70000000,104.88333333]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  9:
    province_name: Battambang
    pop_size: 1058174
    coordinates: [13.02861111,102.98944444] #googlemap
    beta: 0
    districts_info: #Battambang, Moung Ruessei, Sampov Loun, Sangkae, Thma Koul
      pop_proportion_by_districts: [0.347235,0.109936,0.132682,0.175520,0.234627] #citypopulation.de
      beta_by_district: [0.0, 0.0, 0.0, 0.0, 0.0]
      coordinates_by_district: [[12.7783217,102.4852183], [12.7740211,103.4428882], [13.3406701,102.4022306], [13.0864923,103.2444842], [13.2718993,103.0711981]]
  10:
    province_name: Pailin
    pop_size: 70486
    coordinates: [12.85055556,102.60944444]
    beta: 0.045
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  11:
    province_name: Pursat
    pop_size: 0 #397161
    coordinates: [12.53333333,103.91666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0,0]
      coordinates_by_district: [[0,0]]
  12:
    province_name: Kampong Chhnang
    pop_size: 0 #472341
    coordinates: [12.25000000,104.66666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  13:
    province_name: Koh Kong
    pop_size: 0 #117481
    coordinates: [11.39916667,103.49472222]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  14:
    province_name: Kampong Speu
    pop_size: 0 #716944
    coordinates: [11.45000000,104.50000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  15:
    province_name: Kampot
    pop_size: 0 #585850
    coordinates: [10.60000000,104.16666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  16:
    province_name: Preah Sihanouk
    pop_size: 0 #221396
    coordinates: [10.62333333,103.52500000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  17:
    province_name: Kep
    pop_size: 0 #35753
    coordinates: [10.48333333,104.30000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  18:
    province_name: Takeo
    pop_size: 0 #844906
    coordinates: [10.98333333,104.78333333]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  19:
    province_name: Kandal
    pop_size: 0 #1265280
    coordinates: [13.86250000,100.51444444]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  20:
    province_name: Phnom Penh
    pop_size: 0 #1501725
    coordinates: [11.55000000,104.91666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  21:
    province_name: Prey Veng
    pop_size: 0 #947372
    coordinates: [11.48333333,105.33333333]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  22:
    province_name: Svay Rieng
    pop_size: 0 #482788
    coordinates: [11.06666667,105.81666667]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  23:
    province_name: Tboung Khmum
    pop_size: 0 #754000
    coordinates: [11.98333333,105.45000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]
  24:
    province_name: Kampong Cham
    pop_size: 0 #928694
    coordinates: [11.98333333,105.45000000]
    beta: 0
    districts_info:
      pop_proportion_by_districts: [0]
      beta_by_district: [0]
      coordinates_by_district: [[0,0]]

grid_y: 1
grid_unit_in_km: 5

number_of_provinces: 1
number_of_districts: 1




# main scaling parameter for transmission, by location
# the last four terms are ignored when the number of locations is 1
beta: [0.2, 0.2, 0.05, 0.15, 0.15, 0.15, 0.45, 0.45, 0.45]
mean_beta_lognormal: -2.550
sd_beta_lognormal: 0.1

# this functionality works, but it was not used in any analyses for the 2015 LGH paper
# seasonality parameters, by location
seasonal_beta:
    a: 0.7778
    phi_upper: 92
    phi_lower: 61
    
# this seasonality feature is under-testing by Giang
seasonality:
  seasonality_function: CosineSeasonality
#    seasonality_function: data_driven_approach

  CosineSeasonality:
    test: 29
    peak: 2
    trough: 0.1
    phi_upper: 92
    phi_lower: 61
  
  
# the last four terms are ignored when the number of locations is 1
population_size_by_location: [50000, 500, 1000, 1000, 1000, 1000, 1000, 1000, 1000]
mean_pop_size_lognormal: 6.214
sd_pop_size_lognormal: 1

# probability that an infectious bite on a human causes a blood stage malaria infection
p_infection_from_an_infectious_bite: 0.1


# the simulation itself uses explicit ages and birthdays
# but for reporting purposes and for age-specific mortality calculations, individuals are grouped into the following age classes
number_of_age_classes: 15
age_structure: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 15, 20, 60, 100]


# this is only used for initializing the population structure at time 0
# the last four rows of the matrix below are ignored when the number of locations is 1
initial_age_structure: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 25, 35, 45, 55, 65, 100]
age_distribution_by_location: [
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387],
[0.0334, 0.0300, 0.0329, 0.0324, 0.0332, 0.0314, 0.0316, 0.0310, 0.0285, 0.0256, 0.0298, 0.0212, 0.0321, 0.0228, 0.0230, 0.1906, 0.1403, 0.0966, 0.0605, 0.0344, 0.0387]]

# below value indicates 37.25 births per 1000 individuals per year
birth_rate: 0.03725
#birth_rate: 0

# annual death rate (probability) by age group
death_rate_by_age: [0.053979329, 0.018935757, 0.006867257, 0.001124347, 0.001136455, 0.001606066, 0.001953783, 0.001530096, 0.001299153, 0.001068073, 0.000978264, 0.000978264, 0.0055, 0.0055, 0.04450]
#death_rate_by_age: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]


# number of days to keep track total number of parasites in population
# in other words, the simulation stores 11 days of mosquitoes-biting-on-humans history
# if an individual is infected today, the infection type and probability will be based 
# on the biting that took place 11 days ago
number_of_tracking_days: 10


# probability of death for patients who are not treated or patients who experience a treatment failure (due to drug resistance, or otherwise)
mortality_when_treatment_fail_by_age: [0.040, 0.020,0.020,0.020,0.020,0.004,0.004,0.004,0.004,0.004,0.004, 0.001, 0.001, 0.001, 0.001]


genotype_info:
    loci:
        - cost_of_resistance: 0.005
          daily_cost_of_resistance: 0.0005
          position: 0
          alleles:
            - value: 0
              mutation_up: [1]
              mutation_down: [0]
              mutation_level: 0
            - value: 1
              mutation_up: [1]
              mutation_down: [0]        
              mutation_level: 1
        - cost_of_resistance: 0.005
          daily_cost_of_resistance: 0.0005
          position: 1
          alleles:
            - value: 0
              mutation_up: [1]
              mutation_down: [0]
              mutation_level: 0
            - value: 1
              mutation_up: [1]
              mutation_down: [0]        
              mutation_level: 1
        - cost_of_resistance: 0.005
          daily_cost_of_resistance: 0.0005
          position: 2
          alleles:
            - value: 0
              mutation_up: [1]
              mutation_down: [0]
              mutation_level: 0
            - value: 1
              mutation_up: [1]
              mutation_down: [0]        
              mutation_level: 1
        - cost_of_resistance: 0.005
          daily_cost_of_resistance: 0.0005
          position: 3
          alleles:
            - value: 0
              mutation_up: [1]
              mutation_down: [0]
              mutation_level: 0
            - value: 1
              mutation_up: [1]
              mutation_down: [0]        
              mutation_level: 1

#parasite genotype:
#0: 0,0,0
#1: 0,0,1
#2: 0,0,2
#3: 0,0,3
#4: 0,1,0
#5: 0,1,1
#6: 0,1,2
#7: 0,1,3
#8: 1,0,0
#9: 1,0,1
#10: 1,0,2
#11: 1,0,3
#12: 1,1,0
#13: 1,1,1
#14: 1,1,2
#15: 1,1,3

fake_efficacy_table: [
[1,1,1,1],
[1,1,1,0],
[1,1,0,1],
[1,1,0,0],
[1,0,1,1],
[1,0,1,0],
[1,0,0,1],
[1,0,0,0],
[0,1,1,1],
[0,1,1,0],
[0,1,0,1],
[0,1,0,0],
[0,0,1,1],
[0,0,1,0],
[0,0,0,1],
[0,0,0,0]
]
#drug id:
# 0: artemisinin
# 1: lumefantrine
# 2: amodiaquine
# 3: mefloquine
# 4: piperaquine

#
# initialize parasite population
# day-location - id - number
# day= 0 is 7 days ago
#
# this is all currently based on the fact that development inside the moquito takes 7 days (DiM=7)
# but, we will want to do sensitivity analyses that allow us to look at DiM=10, DiM=14 and so on.
#
# so, for the IC (inital conditions) below we can just assume that if we had 600 infected persons 3 days ago,
# that the number of infected persons 1 day ago and 5 days ago wa salso 600; in other words, we can remove column
# one from here
#

#
#
# NOV 19 2009: the new input method should look like this
# so that we don't have to put DiM explicitly into the input file
#
#1. loc 2. id (this is the resistance type of the parasite) 3. prevalence unweighted by biting rate
initial_parasite_info:
  - location_id: 0
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 1
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 2
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 3
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 4
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 5
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 6
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 7
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1
  - location_id: 8
    parasite_info:
      - parasite_type_id: 0
        prevalence: 0.1


# functional but not used in 2015 LGH paper
# allows for the introduction of a specific parasite type at a specific time
introduce_parasite:
#  - location: 0
#    parasite_info:
#      - time: 4000
#        genotype_id: 1
#        number_of_cases: 5
#      - time: 4000
#        genotype_id: 2
#        number_of_cases: 5
#      - time: 4000
#        genotype_id: 4
#        number_of_cases: 5
#      - time: 4000
#        genotype_id: 8
#        number_of_cases: 5
#        


# periodic importation of drug-sensitive parasites; five new cases imported every seven days
introduce_parasite_periodically:
  - location: 0
    parasite_info:
      - duration: 7 
        genotype_id: 0
        number_of_cases: 5
        
        


# drug information below
#
# maximum_parasite_killing_rate: 
#       e.g. 0.999 means the drug can kill 99.9% of parasites in 1 day if a person has 
#       the highest possible drug concentration
#
# n: 
#       the slope of the linear portion of the conentration-effect curve
#
# EC50: 
#       the drug concentration which produces 50% of the parasite killing achieved at maximum-concentration
#       ( the expected starting concentration is 1.0 )
#
# age_specific_drug_concentration_sd: 
#       the actual drug concentration, per individual, will be drawn from a normal distribution with mean=1 and this sd.
#
# k: 
#       parameter that describes the change in the mutation probability when drug levels are intermediate
#       - set k=0.5 for a simple linear model where mutation probablity decreases linearly with drug concentration
#       - set k=2 or k=4 for a piecewise-linear model where mutation probability increases from high concentrations
#               to intermediate concentrations, and then decreases linearly from intermediate concentrations to zero
#

EC50_table: [
[0.75, 0.75, 0.75, 0.75, 0.75],
[0.75,0.75, 0.75, 1.3, 1.3],
[0.75, 0.75, 1.3, 0.75, 0.75],
[0.75, 0.75, 1.3, 1.3, 1.3],
[0.75, 1.3, 0.75, 0.75, 0.75],
[0.75, 1.3, 0.75, 1.3, 1.3],
[0.75, 1.3, 1.3, 0.75, 0.75],
[0.75, 1.3, 1.3, 1.3, 1.3],
[1.3, 0.75, 0.75, 0.75, 0.75],
[1.3, 0.75, 0.75, 1.3, 1.3],
[1.3, 0.75, 1.3, 0.75, 0.75],
[1.3, 0.75, 1.3, 1.3, 1.3],
[1.3, 1.3, 0.75, 0.75, 0.75],
[1.3, 1.3, 0.75, 1.3, 1.3],
[1.3, 1.3, 1.3, 0.75, 0.75],
[1.3, 1.3, 1.3, 1.3, 1.3]
]

drugInfo:
  0:    
    half_life: 0.0
    maximum_parasite_killing_rate: 0.999
    n: 25
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [0]
    selecting_alleles: [[1]]
    k: 4
  1: # lumefantrine 
    half_life: 4.5
    maximum_parasite_killing_rate: 0.99
    n: 20
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [1]
    selecting_alleles: [[1]]
    k: 4
  2: # amodiaquine 
    half_life: 9.0
    maximum_parasite_killing_rate: 0.95
    n: 19
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [2]
    selecting_alleles: [[1]]
    k: 4
  
  3: # piperaquine 
    half_life: 28.0
    maximum_parasite_killing_rate: 0.9
    n: 15
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [3]
    selecting_alleles: [[1]]
    k: 4
    
  4: # OZ 439
    half_life: 2.0
    maximum_parasite_killing_rate:  0.999
    n: 25
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [4]
    selecting_alleles: [[1]]
    k: 4
    
  5: # Ferroquine
    half_life: 20.0
    maximum_parasite_killing_rate:  0.95
    n: 15
    age_specific_drug_concentration_sd: [0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4,0.4]
    mutation_probability: 0.0005
    affecting_loci: [4]
    selecting_alleles: [[1]]
    k: 4
  
lumefantrine_drug_id: 2
artemisinin_drug_id: 0
  
# therapy info
# the drug_ids that make up the therapy, and the number of days that the therapy is prescribed for 
# testing day tells you the follow-up point at which it is determined if treatment failed or not
tf_testing_day: 28
TherapyInfo:
  0:    
    drug_id: [0,1]
    dosing_days: 3
  1:
    drug_id: [0,2]
    dosing_days:  3
  2:
    drug_id: [0,3]
    dosing_days: 3
  3:
    drug_id: [4,2]
    dosing_days: 3
  4:
    drug_id: [5,2]
    dosing_days: 3
  5:
    drug_id: [1]
    dosing_days: 3
  6:
    drug_id: [2]
    dosing_days: 3
  7:
    drug_id: [3]
    dosing_days: 3
  8:
    drug_id: [4]
    dosing_days: 3
  9:
    #this is a MAC Therapy
    therapy_ids: [0,0]
    regimen: [1,7]

# drug-deployment strategy - simply uncomment below to turn on a particular strategy
StrategyInfo:
  #strategyName can be SFTStrategy / CyclingStrategy / MFTStrategy / AdaptiveCyclingStrategy
#  strategyName: SFTStrategy
#  strategyName: CyclingStrategy
  strategyName: MFTStrategy
#  strategyName: AdaptiveCyclingStrategy
#  strategyName: SpatialMFTStrategy
#  strategyName: SpatialCombinedMFTCyclingStrategy

  SFTStrategy:
    therapyID: [0]

  # cycle three ACTs in and out every five years
  CyclingStrategy:
    therapyID: [0,1,2]
    cycling_time: 1825
    
  # deploy three ACTs simultaneously
  MFTStrategy:
    therapyID: [0,1,2]
    distribution: [0.33334,0.33333,0.33333]
    
  SpatialMFTStrategy:
    therapyID: [0,1,2]
    distribution: [0.33334,0.33333,0.33333]
    day_until_next_redraw_random_for_changing_drug: 30
    
  SpatialCombinedMFTCyclingStrategy:
    therapyID: [0,1,2]
    cycling_time: 1825

  # cycle three ACTs in and out - switch between ACTs when the fraction of patients experiencing
  # treatment failure get to the trigger value below
  # there is a one-year delay until the actual switch is made in the field (delay_until_actual_trigger)
  AdaptiveCyclingStrategy:
    therapyID: [0,1,2]
    trigger_value: 0.1
    delay_until_actual_trigger: 365
    turn_off_days: 365
    

# this number use to detemine whether a therapy is "useful" or not and it is used to calculate 
# the useful therapeutic duration of a therapy
TF_rate: 0.1

# definitions of some log parasite density levels
#
parasite_density_level:
#  log_parasite_density_cured:        -2.699    # corresponds to 10,000 total parasites (0.002 per μl)
  log_parasite_density_cured:        -4.699    # corresponds to 100 total parasites (0.00002 per μl)
  log_parasite_density_from_liver:    -2.000    # corresponds to 50,000 total parasites (0.01 per μl)
#  log_parasite_density_asymptomatic: 1.301    # corresponds to 20 parasites per microliter of blood
#  log_parasite_density_asymptomatic: 2.69    # corresponds to 500 parasites per microliter of blood
  log_parasite_density_asymptomatic: 3    # corresponds to 1000 parasites per microliter of blood
  log_parasite_density_clinical:     4.301    # corresponds to 20,000 parasites per microliter of blood (total 10^11)
  log_parasite_density_clinical_from:     3.301    # corresponds to 2000 parasites per microliter of blood (total 10^10)
  log_parasite_density_clinical_to:     5.301    # corresponds to 200,000 parasites per microliter of blood (total 10^12)
  log_parasite_density_detectable:   1.000    # corresponds to 10 parasites per microliter of blood
  log_parasite_density_pyrogenic:    3.398    # corresponds to 2500 parasites per microliter of blood


immune_system_information:
  
  #rate at which antimalarial immune function increases when a host is parasitaemic
  b1: 0.00125
  
  #rate at which antimalarial immune function decreases when a host is parasitaemic
  b2: 0.0025
  
  # durations of infection of naive and fully-immune hosts. 
  # these parameters are used to calculate max and min killing rate by immune system
  duration_for_naive: 300
  duration_for_fully_immune: 60

  # initial conditions for the immune function of the population at time zero
  mean_initial_condition: 0.1
  sd_initial_condition: 0.1
  
  # (per year) age-dependent faster acquisition of immunity from age 1 to age 10
  immune_inflation_rate: 0.01   

  # mix and max probabilities of experiencing symptoms as a result of a new infection
  # the actual probability will depend on the host's immunity
  min_clinical_probability: 0.05
  max_clinical_probability: 0.99

  # slope of sigmoidal prob-v-immunity function (parameter z in supplement of 2015 LGH paper) 
  immune_effect_on_progression_to_clinical: 4
  
  # age at which immune function is mature
  age_mature_immunity: 10
  
  # parameter kappa in supplement of 2015 LGH paper
  factor_effect_age_mature_immunity : 1

# days from end of liver-stage infection to appearance of symptoms
days_to_clinical_under_five: 4
days_to_clinical_over_five: 6


# days that parasites develop mature gametocyte after exiting liverstage
# please read the documentation carefully - there are no explicit gametocytes in
# v3.0.2 of the simulation
days_mature_gametocyte_under_five: 4
days_mature_gametocyte_over_five: 6

# probability that a patient completes a course of treatment
p_compliance: 1

# this functionality works. It is used when p_compliance (above) is less than 1.
# It was not used in any analyses for the 2015 LGH paper where p_compliance is always 1.
# this guarantees that the minimum number of dosing days for a poorly-complying 
# patient is still 1
min_dosing_days: 1

# relative biting rates for individuals; uncomment "distribution: Exponential" to use an
# exponentially distributed biting rate
relative_bitting_info:
  max_relative_biting_value: 35
  number_of_biting_levels: 100
  biting_level_distribution:
  #  distribution: Exponential
    distribution: Gamma  
    Exponential:
      scale: 0.17
    Gamma:
      mean: 5
      sd: 10


# this functionality works, but it was not used in any analyses for the 2015 LGH paper
percentMovement: [
[0.0,   0.01,   0.01 ],
[0.01,  0.01,   0.01],
[0.01,  0.04,   0.02]
]

meanDaysToReturn: [
[3,   3,  3 ],
[7,   7,  7 ],
[14,  14, 14 ]
]


gametocyte_level_under_artemisinin_action: 1.0
gametocyte_level_full: 1.0

# these values are based on Ross 2006 - these parameters determine the probability a mosquito
# becomes infected based on the host's asexual parasitaemia level
relative_infectivity:
  sigma: 3.91
  ro: 0.00031
  # on average 1 mosquito take 3 microliters of blood per bloodeal
  blood_meal_volume: 3

# probability to relapse after no treatment, or a treatment failure due to drug resistance
p_relapse: 0.01

# number of days before a relapse can occur
relapse_duration: 30

# relapse rate - used to increase the parasite density after a treatment failure (at the drug clearance day)
# multiply by sqrt(20) per day
relapseRate: 4.4721

# minimum update frequency for a host's attributes (esp. parasite density) is every 7 days, or
# more frequently if other events are occurring at this time
update_frequency: 7

#report to GUI and console every 30 days
report_frequency: 30

# if an infected and asymptomatic host is bitten and infected by a new 
# parasite clone, this setting allows the new infection to cause symptoms
allow_new_coinfection_to_cause_symtoms: true


# this functionality works, but it was not used in any analyses for the 2015 LGH paper
spatial_information:
#  type_of_movement: GeneralGravity
#  type_of_movement: MMC_Zambia
  type_of_movement: Barabasi
#  type_of_movement: Wesolowski

  GeneralGravity:
    test: 200
    
  MMC_Zambia:
    test: 100
    theta: 0.01093251
    alpha: 0.22268982
    beta: 0.14319618
    gamma: 0.83741484
    
  Barabasi:
    test: 150
    r_g_0: 5.8
    beta_r: 1.65
    kappa: 350

  max_relative_moving_value: 35
  number_of_moving_levels: 100
  moving_level_distribution:
  #  distribution: Exponential
    distribution: Gamma  
    Exponential:
      scale: 0.17
    Gamma:
      mean: 5
      sd: 10
  circulation_percent: 0.1
  length_of_stay:
    mean: 5
    sd: 10
    
# this functionality works, but it was not used in any analyses for the 2015 LGH paper
spatial_external_population_information:
  max_relative_moving_value: 35
  number_of_moving_levels: 100
  moving_level_distribution:
  #  distribution: Exponential
    distribution: Gamma  
    Exponential:
      scale: 0.17
    Gamma:
      mean: 5
      sd: 10
  circulation_percent: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
  length_of_stay:
    # drawn from gamma distribution?
    mean: 5
    sd: 10    
  daily_EIR: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
  seasonal_EIR:
    a: 0
    phi_upper: 200
    phi_lower: 100
    
# this functionality works, but it was not used in any analyses for the 2015 LGH paper
tme_info:
  tme_starting_day: 0
  mda_coverage: [0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8]
  mda_duration: [4, 4, 4, 4, 4, 4, 4, 4, 4]
  
# free recombination among the drug resistance loci
using_free_recombination: true
#using_free_recombination: false

# the current treatment failure rate as observed in the population is not really
# today's treatment failure rate, as these data are never assembled that quickly in
# real life; rather, it is the average treatment failure rate observed over the 
# past 60 days
tf_window_size: 60

# special function to make the mean biting rate (across hosts) depend on age
using_age_dependent_bitting_level: false

# special function which makes the probability of an infection (resulting 
# from an infectious mosquito bite) age-dependent
using_variable_probability_infectious_bites_cause_infection: false

fraction_mosquitoes_interrupted_feeding: 0.0

non_artemisinin_switching_day: 7650

non_art_therapy_id: [3, 4]

drug_fraction_non_art_replacement: 0.0